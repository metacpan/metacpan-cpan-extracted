#-*- mode: makefile-gmake; -*-
# autogenerated by [% generator %] v[% version %] on [% timestamp %]

# You can regenerate this file any time you add a new module to your
# project by re-running `autoconf-template-perl.pl` in the root of
# your project.
#
# * from the root of your project...
# * drop a new file in the src/main/perl/lib directory or sub-directory
#   as {name}.pm.in (the .in) is important!
# * re-run `autoconf-template-perl.pl --refresh`
# 
# This will create a new `includes/perl-modules.inc` file.
#
# See the README.md in the `autoconf-template-perl` project for more
# details.

[% INCLUDE "build-rules.tt" %]

# ------------------------------------------------------------------------
[% FOREACH module IN modules %]
# +--------------------------------------------+
# [% IF module.path %][% module.path %][% ELSE %].[% END %]
# +--------------------------------------------+

[% name_uc = module.name_uc | to_am_var -%]
[% name_lc = module.name_lc | to_am_var -%]
[% name_uc%]MODULES = [% makefile_am_list(module.list) %]

G[% name_uc %]MODULES = $([% name_uc %]MODULES:.pm.in=.pm)
[% perl5lib = module.name_lc ? 'perl5lib_' : 'perl5lib' %]
[%IF module.path %][% perl5lib %][% name_lc %]dir = $(perl5libdir)/[% module.path %][% END %]
[% perl5lib %][% name_lc %]_DATA = $(G[% name_uc %]MODULES)

[% FOREACH file IN module.files %][% IF dependencies.$file.size %][% file.replace('\.in$', '') %]: % : %.in [% dependencies.$file.join(" ") %]
[% END %][% END %][% END %]
ALLMODULES = [% makefile_am_list(module_names) %]

GALLMODULES = $(ALLMODULES:.pm.in=.pm)

[% IF man_pages -%]
man3_MANS = $(G3MANPAGES)

G3MANPAGES = $(GALLMODULES:.pm=.3man)

[% INCLUDE "manpage-rules.tt" %]
[% END %]

PERLCRITIC_PM = $(GALLMODULES)

[% FOREACH section IN custom_sections %]
[% section.join("\n") %]
[% END %]
