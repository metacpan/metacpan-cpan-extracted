#!/usr/bin/env execlineb
# SPDX-FileCopyrightText: Peter Pentchev <roam@ringlet.net>
# SPDX-License-Identifier: Artistic-2.0

# TODO: handle -h / --help / -V / --version

importas top_cmd 1
case -- $top_cmd {
	check {
		if {
			emptyenv -P
			tools/el-format-show-config
		}
		tidyall -a --check-only
	}

	reformat {
		if {
			emptyenv -P
			tools/el-format-show-config
		}
		tidyall -a --no-backups
	}
}
foreground {
	fdmove 1 2 echo "Usage: el-format check|reformat"
}
exit 1
