name             = Wasm
author           = Graham Ollis <plicease@cpan.org>
license          = Perl_5
copyright_holder = Graham Ollis
copyright_year   = 2020
version          = 0.04

[@Author::Plicease]
:version       = 2.44
travis_status  = 1
release_tests  = 1
installer      = Author::Plicease::MakeMaker
github_user    = perlwasm
test2_v0       = 1
workflow       = windows
workflow       = macos
diag           = +Alien::wasmtime

diag_preamble = | $post_diag = sub {
diag_preamble = |   eval {
diag_preamble = |     require Wasm::Wasmtime::FFI;
diag_preamble = |     diag "Wasm::Wasmtime::FFI->_lib = $_" for Wasm::Wasmtime::FFI->_lib;
diag_preamble = |   };
diag_preamble = |   diag "error requiring Wasm::Wasmtime::FFI: $@" if $@;
diag_preamble = | };

[Author::Plicease::Core]

[Prereqs / ConfigurePrereqs]
-phase = configure
FFI::CheckLib = 0.26

[Prereqs / TestPrereqs]
-phase = test
Carp::Assert = 0
PeekPoke::FFI = 0

FFI::CheckLib = 0.26

[DynamicPrereqs / AlienWasmtime]
-condition = do { use FFI::CheckLib 0.26; !find_lib lib => 'wasmtime' }
-body = requires('Alien::wasmtime', '0.05')

[Author::Plicease::Upload]
cpan = 1

[InsertExample]
remove_boiler = 1

[PruneFiles]
filename = xt/author/pod_spelling_common.t
match = \.wasm$
match = ^jit
