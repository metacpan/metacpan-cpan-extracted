use strict;
use Mail::Send::Loop;

my @sender = ('Acting@netdlp.com', 'Actors@netdlp.com', 'Administrator@netdlp.com');
my @rpient = ('tiger@freedom.net', 'lion@freedom.net');

my $mail_host = $ARGV[0] || '127.0.0.1';
my $mail_port = "25";
	
my $mailer = new Mail::Send::Loop(
	mail_host  => '127.0.0.1',
	mail_port  => 25,
	mail_mode  => '1tom',
	greeting   => 'www.com',
	senders    => \@sender,
	recipients => \@rpient,	
	mail_count => 8,
);

my $email_body = &getMIME(); 

$mailer->setDebug(1);

my $ret = $mailer->sendMail_LoopAllUsers(
	mail_body	=> $email_body,
	mail_mode	=> '1to1',
	mail_count	=> 3,
);
print "  $ret mails sent\n";

$mailer->setDebug(1);

$ret = $mailer->sendMail_AllFilesInFolder(
	mail_folder  => 'test_emails', 
	mail_mode    => '1to1',
	mail_subject => "babbaaba",
	mail_txt_body=> "7777",
	greetings    => "ccc.com",
	mail_count   => -1,

);
print "  $ret mails sent\n";

### -----

sub getMIME(){

#return "this is a test";

return 	qq(MIME-Version: 1.0
Content-Transfer-Encoding: binary
Content-Type: multipart/mixed; boundary="_----------=_128097394742080"
X-Mailer: MIME::Lite 3.027 (F2.76; T1.30; A2.06; B3.08; Q3.08)
Date: Wed, 4 Aug 2010 19:05:47 -0700
From: jkang\@freedom.net
To: bill\@freedom.net
Subject: A message with 2 parts ...

This is a multi-part message in MIME format.

--_----------=_128097394742080
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
Content-Type: text/plain

Here's the attachment file(s) you wanted
--_----------=_128097394742080
Content-Disposition: attachment; filename="head.gif"
Content-Transfer-Encoding: base64
Content-Type: image/gif; name="head.gif"

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
0LEuHpHoJA8BDsDAJlv+GmASZhQdBJpHpggIADs=

--_----------=_128097394742080--
);
}