Name:           perl-TheSchwartz
Version:        1.12
Release:        0%{?dist}
Summary:        Reliable job queue
License:        GPL+ or Artistic
Group:          Development/Libraries
URL:            http://search.cpan.org/dist/TheSchwartz/
Source0:        http://www.cpan.org/modules/by-module/TheSchwartz/TheSchwartz-%{version}.tar.gz
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
BuildArch:      noarch
BuildRequires:  perl(Data::ObjectDriver) >= 0.04
BuildRequires:  perl(Module::Build)
BuildRequires:  perl(Test::More)
BuildRequires:  perl(DBD::SQLite)
Requires:       perl(Data::ObjectDriver) >= 0.04
Requires:       perl(:MODULE_COMPAT_%(eval "`%{__perl} -V:version`"; echo $version))

%description
TheSchwartz is a reliable job queue system. Your application can put jobs
into the system, and your worker processes can pull jobs from the queue
atomically to perform. Failed jobs can be left in the queue to retry later.

%prep
%setup -q -n TheSchwartz-%{version}

%build
%{__perl} Build.PL installdirs=site
./Build

%install
rm -rf $RPM_BUILD_ROOT

./Build install destdir=$RPM_BUILD_ROOT create_packlist=0
find $RPM_BUILD_ROOT -depth -type d -exec rmdir {} 2>/dev/null \;

%{_fixperms} $RPM_BUILD_ROOT/*

find $RPM_BUILD_ROOT -type f -print | sed "s@^$RPM_BUILD_ROOT@@g" > filelist

%check
./Build test

%clean
rm -rf $RPM_BUILD_ROOT

%files -f filelist
%defattr(-,root,root,-)
%doc CHANGES doc README.md

%changelog
* Mon Mar 30 2015  Jeff Fearn 1.12-0
- New release.

* Mon Nov 03 2014 Jeff Fearn 1.11-1
- Specfile autogenerated by cpanspec 1.79.
